<div class="container">
    <div class="row justify-content-center align-items center">
            
        <div class="col-lg-6 my-5">
            <div class="section-title">
                <h2>Detalles de compra</h2>
            </div>

            <form  #compraForm="ngForm" >
            <div *ngIf='!user'>
                <div class="input-group mb-3">
                    <div class="input-group-prepend">
                        <span class="input-group-text" >Nombre del comprador</span>
                    </div>
                    <input type="text" 
                           class="form-control ng-valid" 
                           placeholder="Nombre y apellido" 
                           name="nombre" 
                           [(ngModel)]="comprador.nombre" 
                           required 
                           min='3'>
                </div>
                <div class="input-group mb-3">
                    <div class="input-group-prepend">
                        <span class="input-group-text" >Correo electronico</span>
                    </div>
                    <input type="email" 
                           class="form-control ng-valid" 
                           placeholder="Email" 
                           name="email"
                           id="email"
                           [(ngModel)]="comprador.email" 
                           required>
                </div>
            </div>

            <div *ngIf='user'>
                <div class="input-group mb-3">
                    <div class="input-group-prepend">
                        <span class="input-group-text" >Nombre del comprador</span>
                    </div>
                    <input type="text" 
                           class="form-control ng-valid" 
                           placeholder="Nombre y apellido" 
                           name="nombre" 
                           [(ngModel)]="user.nombre" 
                           required 
                           min='3'>
                </div>
                <div class="input-group mb-3">
                    <div class="input-group-prepend">
                        <span class="input-group-text" >Correo electronico</span>
                    </div>
                    <input type="email" 
                           class="form-control ng-valid" 
                           placeholder="Email" 
                           name="email"
                           id="email"
                           [(ngModel)]="user.email" 
                           required>
                </div>
            </div>
            
            <div class="input-group mb-3">
                <div class="input-group-prepend">
                    <span class="input-group-text" >Direcci√≥n de envio</span>
                </div>
                <input type="text" 
                       class="form-control" 
                       placeholder="Direccion" 
                       name="direccion" 
                       [(ngModel)]="comprador.direccion" 
                       required>
            </div>

            <div class="input-group mb-3">
                <div class="input-group-prepend">
                    <span class="input-group-text" >Telefono</span>
                </div>
                <input type="number" 
                       class="form-control" 
                       placeholder="telefono" 
                       name='tlf' 
                       [(ngModel)]="comprador.telefono">
            </div>
            <button class="btn btn-lg btn-primary mx-2 my-5" type="button" (click)="comprame(compraForm)"> Realizar compra </button>
        </form>
        </div>

        
        <div class="col-lg-4 text-center my-5 bg-light">
            <div class="section-title">
                <h2>
                    {{carrito.totalprod}} | <i class="fab fa-opencart"></i>
                </h2>
            </div>

            <ul class="list-group my-5">
                <li class="list-group-item d-flex justify-content-between align-items-center"
                    *ngFor='let item of carrito.productos; let i = index'>
                    {{item.nombre}}
                    <span class="badge badge-primary badge-pill">{{item.cantidad}}</span>
                    <i class="fas fa-trash" (click)="quitame(i)"></i>
                </li>
                <li *ngIf='carrito.subtotal > 0'
                    class="list-group-item d-flex justify-content-between align-items-center">
                    Total: <span>{{carrito.subtotal}}$ ARS</span>
                </li>
            </ul>


            <h4 *ngIf='carrito.productos.length == 0'>No tienes productos en el carrito</h4>
            
            <button class="btn btn-lg btn-secondary mx-2 my-5" routerLink='/tienda'>Seguir comprando</button>
        </div>
    </div>
</div>